{"version":3,"sources":["components/Controls.jsx","cake/scene.gltf","App.js","reportWebVitals.js","index.js"],"names":["Controls","video","markerFound","instructions","useState","playing","setPlaying","upright","setUpright","portrait","setPortrait","container","document","querySelector","screen","orient","className","disabled","onClick","classList","toggle","setAttribute","prev","id","pause","play","addEventListener","endedAction","console","log","removeEventListener","removeAttribute","object3D","position","set","rotation","src","x","App","initial","setMarkerFound","setInstructions","videoRef","useRef","searchParams","URLSearchParams","window","location","search","video_id","get","message","cake","toggleMarkerFound","useEffect","aCanvas","scene","sceneEl","remove","add","current","vr-mode-ui","arjs","renderer","crossOrigin","loop","preload","playsInline","ref","smooth","smoothCount","preset","height","width","value","look-at","gltf-model","scale","animation__bob","animation__spin","animation__wobble","animation","camera","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","setTimeout","ReactDOM","render","getElementById"],"mappings":"iMAGe,SAASA,EAAT,GAAyD,IAArCC,EAAoC,EAApCA,MAAOC,EAA6B,EAA7BA,YAAaC,EAAgB,EAAhBA,aAAgB,EACvCC,oBAAS,GAD8B,mBAC9DC,EAD8D,KACrDC,EADqD,OAEvCF,oBAAS,GAF8B,mBAE9DG,EAF8D,KAErDC,EAFqD,OAGrCJ,oBAAS,GAH4B,mBAG9DK,EAH8D,KAGpDC,EAHoD,KAI/DC,EAAYC,SAASC,cAAc,cACnCC,EAASF,SAASC,cAAc,WAChCE,EAASH,SAASC,cAAc,WAEjCZ,IACHA,EAAQW,SAASC,cAAc,WA6CjC,OACE,qCACGV,GACC,qBAAKa,UAAU,WAAf,SACE,mBAAGA,UAAU,eAAb,SAA6Bb,MAGjC,sBAAKa,UAAU,UAAf,UACE,wBACEA,UAAU,cACVC,UAAWf,EACXgB,QAnCa,WACnBH,EAAOI,UAAUC,OAAO,WACxBN,EAAOO,aAAa,SAAUZ,EAAW,EAAI,GAC7CK,EAAOO,aAAa,QAASZ,EAAW,EAAI,GAC5CC,GAAY,SAACY,GAAD,OAAWA,MA4BnB,SAKE,mBAAGC,GAAG,SAASP,UAAU,oBAE3B,wBACEE,QA1DY,WAMbjB,IACHA,EAAQW,SAASC,cAAc,WAE7BR,GACFJ,EAAMuB,QACNlB,GAAW,IACFJ,IACTD,EAAMwB,OACNnB,GAAW,GACXL,EAAMyB,iBAAiB,SAdL,SAAdC,IACJC,QAAQC,IAAI,SACZvB,GAAW,GACXL,EAAM6B,oBAAoB,QAASH,QAuD/BV,UAAWf,EACXc,UAAU,cAHZ,SAKGX,EACC,mBAAGW,UAAU,iBAEb,mBAAGA,UAAU,kBAGjB,wBACEE,QA5CiB,WACvBU,QAAQC,IAAIf,GACRP,GACFO,EAAOiB,gBAAgB,WACvBjB,EAAOkB,SAASC,SAASC,IAAI,EAAG,EAAG,IACnCpB,EAAOkB,SAASG,SAASD,IAAI,EAAG,EAAG,KAEnCpB,EAAOO,aAAa,UAAW,CAC7Be,IAAK,YAEPtB,EAAOkB,SAASC,SAASC,IAAI,EAAG,GAAI,IAGtCvB,EAAUqB,SAASG,SAASE,GAAK9B,GAAW,OAAS,OACrDC,GAAW,SAACc,GAAD,OAAWA,MA+BhBL,UAAWf,EACXc,UAAU,cAHZ,SAKGT,EAAU,OAAS,kB,UCxFf,MAA0B,mCCsI1B+B,MAjIf,WACE,IAAMC,EAAU,yCADH,EAEyBnC,oBAAS,GAFlC,mBAENF,EAFM,KAEOsC,EAFP,OAG2BpC,mBAASmC,GAHpC,mBAGNpC,EAHM,KAGQsC,EAHR,KAIPC,EAAWC,iBAAO,MAClBC,EAAe,IAAIC,gBAAgBC,OAAOC,SAASC,QACnDC,EAAWL,EAAaM,IAAI,SAC5BC,EAAUP,EAAaM,IAAI,YAAc,kBAE/CtB,QAAQC,IAAI,OAAQuB,GAEpB,IAAMC,EAAoB,WACxBb,GAAe,SAAClB,GAAD,OAAWA,KAC1BmB,GAAgB,SAACnB,GACf,OAAIA,EAAa,GACLiB,MAoBhB,OAhBAe,qBAAU,WACR1B,QAAQC,IAAI,wBACZ,IAAM0B,EAAU3C,SAASC,cAAc,aAEjC2C,EADO5C,SAASC,cAAc,SACjB4C,QAMnB,OALAD,EAAM9B,iBAAiB,cAAe2B,GACtCG,EAAM9B,iBAAiB,aAAc2B,GACrCE,EAAQpC,UAAUuC,OAAO,YACzBH,EAAQpC,UAAUwC,IAAI,YAEf,WACLH,EAAM1B,oBAAoB,cAAeuB,GACzCG,EAAM1B,oBAAoB,aAAcuB,MAEzC,IAGD,qCACE,cAAC,EAAD,CACEX,SAAUA,EAASkB,QACnB1D,YAAaA,EACbC,aAAcA,IAEhB,0BACE0D,cAAY,EACZC,KAAK,wBACLvC,GAAG,YACHwC,SAAS,gCAJX,UAME,mCACE,uBACExC,GAAG,QACHyC,YAAY,YACZC,MAAM,EACNC,QAAQ,OACR9B,IAAG,iEAA4Da,GAC/DkB,aAAW,EACXC,IAAK1B,MAGT,0BAAUnB,GAAG,OAAO8C,OAAO,OAAOC,YAAY,KAAKC,OAAO,OAA1D,SACE,2BAAUhD,GAAG,YAAYU,SAAS,QAAlC,UACE,yBACEV,GAAG,SACHa,IAAI,SAEJH,SAAS,SACTuC,OAAO,IACPC,MAAM,IACNtC,SAAS,UAEX,wBACEuC,MAAOvB,EACPlB,SAAS,aACT0C,UAAQ,iBAEV,0BACEpD,GAAG,eACHqD,aAAW,8EACXZ,YAAY,YACZa,MAAM,cACN5C,SAAS,WACT6C,eAAe,gFACfC,gBAAgB,yEAChBC,kBAAkB,gIAEpB,0BACEzD,GAAG,WACHqD,aAAW,sEACXC,MAAM,cACN5C,SAAS,cACT6C,eAAe,8EACfC,gBAAgB,gFAChBC,kBAAkB,iIAEpB,0BACEzD,GAAG,WACHqD,aAAW,sEACXC,MAAM,cACN5C,SAAS,SACTgD,UAAU,gFACVF,gBAAgB,yEAChBC,kBAAkB,iIAGpB,0BACEzD,GAAG,OACHqD,aAAW,mEACXC,MAAM,oBACN5C,SAAS,UACT8C,gBAAgB,gFAChBC,kBAAkB,iIAGpB,0BACEzD,GAAG,WACHqD,aAAW,qGACXC,MAAM,cACN5C,SAAS,aACT8C,gBAAgB,gFAChBC,kBAAkB,sIAIxB,0BAAUzD,GAAG,SAAS2D,QAAM,EAACjD,SAAS,mBCpH/BkD,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCFdQ,WAAWC,IAASC,OAAO,cAAC,EAAD,IAASlF,SAASmF,eAAe,SAAU,MAKtEZ,K","file":"static/js/main.9d98bc94.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport \"./Controls.css\";\n\nexport default function Controls({ video, markerFound, instructions }) {\n  const [playing, setPlaying] = useState(false);\n  const [upright, setUpright] = useState(true);\n  const [portrait, setPortrait] = useState(true);\n  const container = document.querySelector(\"#container\");\n  const screen = document.querySelector(\"#screen\");\n  const orient = document.querySelector(\"#orient\");\n\n  if (!video) {\n    video = document.querySelector(\"#video\");\n  }\n\n  const handleClick = () => {\n    const endedAction = () => {\n      console.log(\"ended\");\n      setPlaying(false);\n      video.removeEventListener(\"ended\", endedAction);\n    };\n    if (!video) {\n      video = document.querySelector(\"#video\");\n    }\n    if (playing) {\n      video.pause();\n      setPlaying(false);\n    } else if (markerFound) {\n      video.play();\n      setPlaying(true);\n      video.addEventListener(\"ended\", endedAction);\n    }\n  };\n  const handleOrient = () => {\n    orient.classList.toggle(\"rotated\");\n    screen.setAttribute(\"height\", portrait ? 2 : 4);\n    screen.setAttribute(\"width\", portrait ? 4 : 2);\n    setPortrait((prev) => !prev);\n  };\n\n  const handleARPosition = () => {\n    console.log(screen);\n    if (upright) {\n      screen.removeAttribute(\"look-at\");\n      screen.object3D.position.set(0, 0, 0.2);\n      screen.object3D.rotation.set(0, 0, 0);\n    } else {\n      screen.setAttribute(\"look-at\", {\n        src: \"#player\",\n      });\n      screen.object3D.position.set(0, 0, -2);\n    }\n\n    container.object3D.rotation.x += upright ? -1.5708 : 1.5708;\n    setUpright((prev) => !prev);\n  };\n\n  return (\n    <>\n      {instructions && (\n        <div className=\"messages\">\n          <p className=\"instructions\">{instructions}</p>\n        </div>\n      )}\n      <div className=\"buttons\">\n        <button\n          className=\"play-button\"\n          disabled={!markerFound}\n          onClick={handleOrient}\n        >\n          <i id=\"orient\" className=\"fas fa-mobile\"></i>\n        </button>\n        <button\n          onClick={handleClick}\n          disabled={!markerFound}\n          className=\"play-button\"\n        >\n          {playing ? (\n            <i className=\"fas fa-pause\"></i>\n          ) : (\n            <i className=\"fas fa-play\"></i>\n          )}\n        </button>\n        <button\n          onClick={handleARPosition}\n          disabled={!markerFound}\n          className=\"play-button\"\n        >\n          {upright ? \"Flat\" : \"Upright\"}\n        </button>\n      </div>\n    </>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/scene.dbaf5295.gltf\";","import { useRef, useEffect, useState } from \"react\";\nimport Controls from \"./components/Controls\";\nimport \"./App.css\";\nimport cake from \"./cake/scene.gltf\";\n\nfunction App() {\n  const initial = \"Hold Camera over Hiro Marker to Start!\";\n  const [markerFound, setMarkerFound] = useState(false);\n  const [instructions, setInstructions] = useState(initial);\n  const videoRef = useRef(null);\n  const searchParams = new URLSearchParams(window.location.search);\n  const video_id = searchParams.get(\"video\");\n  const message = searchParams.get(\"message\") || \"Happy Birthday!\";\n\n  console.log(\"cake\", cake);\n\n  const toggleMarkerFound = () => {\n    setMarkerFound((prev) => !prev);\n    setInstructions((prev) => {\n      if (prev) return \"\";\n      else return initial;\n    });\n  };\n\n  useEffect(() => {\n    console.log(\"c-ar-d-viewer 0.12.0\");\n    const aCanvas = document.querySelector(\".a-canvas\");\n    const hiro = document.querySelector(\"#hiro\");\n    const scene = hiro.sceneEl;\n    scene.addEventListener(\"markerFound\", toggleMarkerFound);\n    scene.addEventListener(\"markerLost\", toggleMarkerFound);\n    aCanvas.classList.remove(\"a-canvas\");\n    aCanvas.classList.add(\"override\");\n\n    return function cleanup() {\n      scene.removeEventListener(\"markerFound\", toggleMarkerFound);\n      scene.removeEventListener(\"markerLost\", toggleMarkerFound);\n    };\n  }, []);\n\n  return (\n    <>\n      <Controls\n        videoRef={videoRef.current}\n        markerFound={markerFound}\n        instructions={instructions}\n      />\n      <a-scene\n        vr-mode-ui={false}\n        arjs=\"trackingMethod: best;\"\n        id=\"aframebox\"\n        renderer=\"logarithmicDepthBuffer: true;\"\n      >\n        <a-assets>\n          <video\n            id=\"video\"\n            crossOrigin=\"anonymous\"\n            loop={false}\n            preload=\"auto\"\n            src={`https://card-euwest-convert.s3-eu-west-1.amazonaws.com/${video_id}`}\n            playsInline\n            ref={videoRef}\n          ></video>\n        </a-assets>\n        <a-marker id=\"hiro\" smooth=\"true\" smoothCount=\"10\" preset=\"hiro\">\n          <a-entity id=\"container\" position=\"0 0 0\">\n            <a-video\n              id=\"screen\"\n              src=\"#video\"\n              // look-at=\"src: #player\"\n              position=\"0 0 -2\"\n              height=\"4\"\n              width=\"2\"\n              rotation=\"0 0 0\"\n            ></a-video>\n            <a-text\n              value={message}\n              position=\"-0.8 3.5 1\"\n              look-at=\"src: #player\"\n            ></a-text>\n            <a-entity\n              id=\"balloonClust\"\n              gltf-model=\"url(https://richhouse83.github.io/c-ar-d-viewer/balloon-cluster/scene.gltf)\"\n              crossOrigin=\"anonymous\"\n              scale=\"0.2 0.2 0.2\"\n              position=\"0 3.2 -1\"\n              animation__bob=\"property: object3D.position.y; to: 3.2; dir: alternate; dur: 1500; loop: true\"\n              animation__spin=\"property: rotation; to: 0 360 0; easing: linear; loop: true; dur: 5000\"\n              animation__wobble=\"property: rotation; from: -7 0 6; to: 6 0 -6; dir: alternate; easing: easeInOutQuad; elasticity: 800; loop: true; dur: 1400\"\n            ></a-entity>\n            <a-entity\n              id=\"balloon3\"\n              gltf-model=\"url(https://richhouse83.github.io/c-ar-d-viewer/balloon/scene.gltf)\"\n              scale=\"0.1 0.1 0.1\"\n              position=\"-1.2 3.1 -2\"\n              animation__bob=\"property: object3D.position.y; to: 4; dir: alternate; dur: 3000; loop: true\"\n              animation__spin=\"property: rotation; to: 0 360 0; easing: easeInOutQuad; loop: true; dur: 4500\"\n              animation__wobble=\"property: rotation; from: -8 0 9; to: 10 0 -8; dir: alternate; easing: easeInOutQuad; elasticity: 800; loop: true; dur: 1200\"\n            ></a-entity>\n            <a-entity\n              id=\"balloon1\"\n              gltf-model=\"url(https://richhouse83.github.io/c-ar-d-viewer/balloon/scene.gltf)\"\n              scale=\"0.1 0.1 0.1\"\n              position=\"1 3 -2\"\n              animation=\"property: object3D.position.y; to: 3.2; dir: alternate; dur: 2000; loop: true\"\n              animation__spin=\"property: rotation; to: 0 360 0; easing: linear; loop: true; dur: 6800\"\n              animation__wobble=\"property: rotation; from: -9 0 9; to: 8 0 -10; dir: alternate; easing: easeInOutQuad; elasticity: 800; loop: true; dur: 1320\"\n            ></a-entity>\n\n            <a-entity\n              id=\"cake\"\n              gltf-model=\"url(https://richhouse83.github.io/c-ar-d-viewer/cake/scene.gltf)\"\n              scale=\"0.009 0.009 0.009\"\n              position=\"-2 0 -1\"\n              animation__spin=\"property: rotation; to: 0 360 0; easing: easeInOutQuad; loop: true; dur: 4500\"\n              animation__wobble=\"property: rotation; from: -8 0 9; to: 10 0 -8; dir: alternate; easing: easeInOutQuad; elasticity: 800; loop: true; dur: 1200\"\n            ></a-entity>\n\n            <a-entity\n              id=\"gift_box\"\n              gltf-model=\"url(https://raw.githubusercontent.com/richhouse83/c-ar-d-viewer/master/public/gift_box/scene.gltf)\"\n              scale=\"0.5 0.5 0.5\"\n              position=\"1.8 0.8 -1\"\n              animation__spin=\"property: rotation; to: 0 360 0; easing: easeInOutQuad; loop: true; dur: 4500\"\n              animation__wobble=\"property: rotation; from: -8 0 9; to: 10 0 -8; dir: alternate; easing: easeInOutQuad; elasticity: 800; loop: true; dur: 1200\"\n            ></a-entity>\n          </a-entity>\n        </a-marker>\n        <a-entity id=\"player\" camera position=\"0 0.3 2\"></a-entity>\n      </a-scene>\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nsetTimeout(ReactDOM.render(<App />, document.getElementById(\"root\")), 1500);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}