{"version":3,"sources":["components/Controls.jsx","App.js","index.js"],"names":["Controls","markerFound","instructions","useState","playing","setPlaying","upright","setUpright","portrait","setPortrait","container","document","querySelector","screen","orient","video","className","disabled","onClick","classList","toggle","setAttribute","prev","id","pause","play","addEventListener","endedAction","removeEventListener","removeAttribute","object3D","position","set","rotation","src","x","App","initial","setMarkerFound","setInstructions","videoRef","useRef","searchParams","URLSearchParams","window","location","search","videoId","get","message","toggleMarkerFound","useEffect","aCanvas","scene","sceneEl","remove","add","current","vr-mode-ui","arjs","renderer","crossOrigin","loop","preload","playsInline","ref","smooth","smoothCount","preset","look-at","height","width","value","gltf-model","scale","animation__bob","animation__spin","animation__wobble","animation","camera","setTimeout","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.e9327652.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport './Controls.css';\n\nexport default function Controls({ markerFound, instructions }) {\n  const [playing, setPlaying] = useState(false);\n  const [upright, setUpright] = useState(true);\n  const [portrait, setPortrait] = useState(true);\n  const container = document.querySelector('#container');\n  const screen = document.querySelector('#screen');\n  const orient = document.querySelector('#orient');\n\n  const video = document.querySelector('#video');\n\n  const handleClick = () => {\n    const endedAction = () => {\n      setPlaying(false);\n      video.removeEventListener('ended', endedAction);\n    };\n    if (playing) {\n      video.pause();\n      setPlaying(false);\n    } else if (markerFound) {\n      video.play();\n      setPlaying(true);\n      video.addEventListener('ended', endedAction);\n    }\n  };\n  const handleOrient = () => {\n    orient.classList.toggle('rotated');\n    screen.setAttribute('height', portrait ? 2 : 4);\n    screen.setAttribute('width', portrait ? 4 : 2);\n    setPortrait((prev) => !prev);\n  };\n\n  const handleARPosition = () => {\n    if (upright) {\n      screen.removeAttribute('look-at');\n      screen.object3D.position.set(0, 0, 0.2);\n      screen.object3D.rotation.set(0, 0, 0);\n    } else {\n      screen.setAttribute('look-at', {\n        src: '#player',\n      });\n      screen.object3D.position.set(0, 0, -2);\n    }\n\n    container.object3D.rotation.x += upright ? -1.5708 : 1.5708;\n    setUpright((prev) => !prev);\n  };\n\n  return (\n    <>\n      {instructions && (\n        <div className=\"messages\">\n          <p className=\"instructions\">{instructions}</p>\n        </div>\n      )}\n      <div className=\"buttons\">\n        <button\n          className=\"play-button\"\n          disabled={!markerFound}\n          onClick={handleOrient}\n        >\n          <i id=\"orient\" className=\"fas fa-mobile\" />\n        </button>\n        <button\n          onClick={handleClick}\n          disabled={!markerFound}\n          className=\"play-button\"\n        >\n          {playing ? (\n            <i className=\"fas fa-pause\" />\n          ) : (\n            <i className=\"fas fa-play\" />\n          )}\n        </button>\n        <button\n          onClick={handleARPosition}\n          disabled={!markerFound}\n          className=\"play-button\"\n        >\n          {upright ? 'Flat' : 'Upright'}\n        </button>\n      </div>\n    </>\n  );\n}\n","import { useRef, useEffect, useState } from 'react';\nimport Controls from './components/Controls.jsx';\nimport './App.css';\n\nfunction App() {\n  const initial = 'Hold Camera over Hiro Marker to Start!';\n  const [markerFound, setMarkerFound] = useState(false);\n  const [instructions, setInstructions] = useState(initial);\n  const videoRef = useRef(null);\n  const searchParams = new URLSearchParams(window.location.search);\n  const videoId = searchParams.get('video');\n  const message = searchParams.get('message') || 'Happy Birthday!';\n\n  const toggleMarkerFound = () => {\n    setMarkerFound((prev) => !prev);\n    setInstructions((prev) => {\n      if (prev) return '';\n      return initial;\n    });\n  };\n\n  useEffect(() => {\n    const aCanvas = document.querySelector('.a-canvas');\n    const hiro = document.querySelector('#hiro');\n    const scene = hiro.sceneEl;\n    scene.addEventListener('markerFound', toggleMarkerFound);\n    scene.addEventListener('markerLost', toggleMarkerFound);\n    aCanvas.classList.remove('a-canvas');\n    aCanvas.classList.add('override');\n\n    return function cleanup() {\n      scene.removeEventListener('markerFound', toggleMarkerFound);\n      scene.removeEventListener('markerLost', toggleMarkerFound);\n    };\n  }, []);\n\n  return (\n    <>\n      <Controls\n        videoRef={videoRef.current}\n        markerFound={markerFound}\n        instructions={instructions}\n      />\n      <a-scene\n        vr-mode-ui={false}\n        arjs=\"trackingMethod: best;\"\n        id=\"aframebox\"\n        renderer=\"logarithmicDepthBuffer: true;\"\n      >\n        <a-assets>\n          <video\n            id=\"video\"\n            crossOrigin=\"anonymous\"\n            loop={false}\n            preload=\"auto\"\n            src={`https://card-euwest-convert.s3-eu-west-1.amazonaws.com/${videoId}`}\n            playsInline\n            ref={videoRef}\n          />\n        </a-assets>\n        <a-marker id=\"hiro\" smooth=\"true\" smoothCount=\"10\" preset=\"hiro\">\n          <a-entity id=\"container\" position=\"0 0 0\">\n            <a-video\n              id=\"screen\"\n              src=\"#video\"\n              look-at=\"src: #player\"\n              position=\"0 0 -2\"\n              height=\"4\"\n              width=\"2\"\n              rotation=\"0 0 0\"\n            ></a-video>\n            <a-text\n              value={message}\n              position=\"-0.8 3.5 1\"\n              look-at=\"src: #player\"\n            ></a-text>\n            <a-entity\n              id=\"balloonClust\"\n              gltf-model=\"url(https://richhouse83.github.io/c-ar-d-viewer/balloon-cluster/scene.gltf)\"\n              crossOrigin=\"anonymous\"\n              scale=\"0.2 0.2 0.2\"\n              position=\"0 3.2 -1\"\n              animation__bob=\"property: object3D.position.y; to: 3.2; dir: alternate; dur: 1500; loop: true\"\n              animation__spin=\"property: rotation; to: 0 360 0; easing: linear; loop: true; dur: 5000\"\n              animation__wobble=\"property: rotation; from: -7 0 6; to: 6 0 -6; dir: alternate; easing: easeInOutQuad; elasticity: 800; loop: true; dur: 1400\"\n            />\n            <a-entity\n              id=\"balloon3\"\n              gltf-model=\"url(https://richhouse83.github.io/c-ar-d-viewer/balloon/scene.gltf)\"\n              scale=\"0.1 0.1 0.1\"\n              position=\"-1.2 3.1 -2\"\n              animation__bob=\"property: object3D.position.y; to: 4; dir: alternate; dur: 3000; loop: true\"\n              animation__spin=\"property: rotation; to: 0 360 0; easing: easeInOutQuad; loop: true; dur: 4500\"\n              animation__wobble=\"property: rotation; from: -8 0 9; to: 10 0 -8; dir: alternate; easing: easeInOutQuad; elasticity: 800; loop: true; dur: 1200\"\n            />\n            <a-entity\n              id=\"balloon1\"\n              gltf-model=\"url(https://richhouse83.github.io/c-ar-d-viewer/balloon/scene.gltf)\"\n              scale=\"0.1 0.1 0.1\"\n              position=\"1 3 -2\"\n              animation=\"property: object3D.position.y; to: 3.2; dir: alternate; dur: 2000; loop: true\"\n              animation__spin=\"property: rotation; to: 0 360 0; easing: linear; loop: true; dur: 6800\"\n              animation__wobble=\"property: rotation; from: -9 0 9; to: 8 0 -10; dir: alternate; easing: easeInOutQuad; elasticity: 800; loop: true; dur: 1320\"\n            />\n\n            <a-entity\n              id=\"cake\"\n              gltf-model=\"url(https://richhouse83.github.io/c-ar-d-viewer/cake/scene.gltf)\"\n              scale=\"0.009 0.009 0.009\"\n              position=\"-2 0 -1\"\n              animation__spin=\"property: rotation; to: 0 360 0; easing: easeInOutQuad; loop: true; dur: 4500\"\n              animation__wobble=\"property: rotation; from: -8 0 9; to: 10 0 -8; dir: alternate; easing: easeInOutQuad; elasticity: 800; loop: true; dur: 1200\"\n            ></a-entity>\n\n            <a-entity\n              id=\"gift_box\"\n              gltf-model=\"url(https://raw.githubusercontent.com/richhouse83/c-ar-d-viewer/master/public/gift_box/scene.gltf)\"\n              scale=\"0.5 0.5 0.5\"\n              position=\"1.8 0.8 -1\"\n              animation__spin=\"property: rotation; to: 0 360 0; easing: easeInOutQuad; loop: true; dur: 4500\"\n              animation__wobble=\"property: rotation; from: -8 0 9; to: 10 0 -8; dir: alternate; easing: easeInOutQuad; elasticity: 800; loop: true; dur: 1200\"\n            ></a-entity>\n          </a-entity>\n        </a-marker>\n        <a-entity id=\"player\" camera position=\"0 0.3 2\" />\n      </a-scene>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nsetTimeout(ReactDOM.render(<App />, document.getElementById('root')), 1500);\n"],"sourceRoot":""}